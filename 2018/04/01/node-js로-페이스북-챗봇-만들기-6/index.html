<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>node.js로 페이스북 챗봇 만들기 6 | 구구구구구구구</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="목차 서문 개발을 하기 위한 환경 준비 node.js Visual Studio Code ngrok   node.js로 기본적인 서버 만들기 hello world HTTP 서버 만들기 HTTP 서버 요청 핸들링   facebook messenger와 서버 연동하기 AWS lambda에 올리기  4. facebook messenger와 서버 연동하기페이스북 메">
<meta name="keywords" content="aws lambda,node.js,챗봇,chatbot,facebook messenger">
<meta property="og:type" content="article">
<meta property="og:title" content="node.js로 페이스북 챗봇 만들기 6">
<meta property="og:url" content="https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/index.html">
<meta property="og:site_name" content="구구구구구구구">
<meta property="og:description" content="목차 서문 개발을 하기 위한 환경 준비 node.js Visual Studio Code ngrok   node.js로 기본적인 서버 만들기 hello world HTTP 서버 만들기 HTTP 서버 요청 핸들링   facebook messenger와 서버 연동하기 AWS lambda에 올리기  4. facebook messenger와 서버 연동하기페이스북 메">
<meta property="og:locale" content="ko">
<meta property="og:image" content="https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/page_category.PNG">
<meta property="og:image" content="https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/facebook_developer.PNG">
<meta property="og:image" content="https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/new_app.PNG">
<meta property="og:image" content="https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/app_dashboard.PNG">
<meta property="og:image" content="https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/messenger_setting.PNG">
<meta property="og:image" content="https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/webhook.PNG">
<meta property="og:updated_time" content="2018-04-03T05:09:54.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="node.js로 페이스북 챗봇 만들기 6">
<meta name="twitter:description" content="목차 서문 개발을 하기 위한 환경 준비 node.js Visual Studio Code ngrok   node.js로 기본적인 서버 만들기 hello world HTTP 서버 만들기 HTTP 서버 요청 핸들링   facebook messenger와 서버 연동하기 AWS lambda에 올리기  4. facebook messenger와 서버 연동하기페이스북 메">
<meta name="twitter:image" content="https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/page_category.PNG">
  
    <link rel="alternate" href="/atom.xml" title="구구구구구구구" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">구구구구구구구</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">비둘기를 올린다.</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="검색"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://ohseunghyeon.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-node-js로-페이스북-챗봇-만들기-6" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/04/01/node-js로-페이스북-챗봇-만들기-6/" class="article-date">
  <time datetime="2018-04-01T11:55:53.000Z" itemprop="datePublished">2018-04-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/chatbot/">chatbot</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      node.js로 페이스북 챗봇 만들기 6
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="목차"><a href="#목차" class="headerlink" title="목차"></a>목차</h2><ol>
<li><a href="/2018/03/20/node-js로-페이스북-챗봇-만들기-1/">서문</a></li>
<li><a href="/2018/03/21/node-js로-페이스북-챗봇-만들기-2/">개발을 하기 위한 환경 준비</a><ul>
<li>node.js</li>
<li>Visual Studio Code</li>
<li>ngrok</li>
</ul>
</li>
<li><a href="/2018/03/22/node-js로-페이스북-챗봇-만들기-3">node.js로 기본적인 서버 만들기</a><ul>
<li><a href="/2018/03/22/node-js로-페이스북-챗봇-만들기-3">hello world</a></li>
<li><a href="/2018/03/24/node-js로-페이스북-챗봇-만들기-4">HTTP 서버 만들기</a></li>
<li><a href="/2018/03/29/node-js로-페이스북-챗봇-만들기-5">HTTP 서버 요청 핸들링</a></li>
</ul>
</li>
<li><a href="/2018/04/01/node-js로-페이스북-챗봇-만들기-6">facebook messenger와 서버 연동하기</a></li>
<li>AWS lambda에 올리기</li>
</ol>
<h1 id="4-facebook-messenger와-서버-연동하기"><a href="#4-facebook-messenger와-서버-연동하기" class="headerlink" title="4. facebook messenger와 서버 연동하기"></a>4. facebook messenger와 서버 연동하기</h1><p>페이스북 메신저와 연동하기 위해서는 먼저 페이스북에 페이지를 하나 만드셔야 합니다.</p>
<p><a href="https://www.facebook.com/pages" target="_blank" rel="noopener">페이스북 페이지</a>에 접속하셔서 페이지 만들기를 진행해주세요. 당연히 페이스북 아이디가 있으실 거라 믿습니다. 그렇지 않고서야 이 글을 여기까지 읽지 않으셨을 거라고 믿으니까요.</p>
<img src="/2018/04/01/node-js로-페이스북-챗봇-만들기-6/page_category.PNG" title="페이지 만들기에 접속한 모습">
<p>유형을 선택할 수 있네요. 아무거나 하세요. 솔직히 무슨 상관이겠어요. 하고 싶은 걸 하세요. 페이지를 만드신 후엔 페이스북 개발자 페이지로 가야 합니다.</p>
<p><a href="https://developers.facebook.com/" target="_blank" rel="noopener">페이스북 개발자 페이지</a>를 여세요.</p>
<img src="/2018/04/01/node-js로-페이스북-챗봇-만들기-6/facebook_developer.PNG" title="페이스북 개발자 페이지에 접속한 모습">
<p>우측 상단에 “내 앱”이든 다른 아이든 눌러주세요. 그리고 “새 앱 추가”를 눌러주세요.</p>
<p>아래와 같은 창이 당신의 모니터에서 떴기를 바랍니다. </p>
<img src="/2018/04/01/node-js로-페이스북-챗봇-만들기-6/new_app.PNG" title="새 앱 추가">
<p>앱의 이름, 연락처를 입력하세요. 앱 이름은 “테스트 앱” 등 마음대로 하셔도 됩니다. 이름이 왜 앱인지는 저도 잘 모르겠습니다. 이 시스템을 이해하기에 좀 덜 직관적이라는 생각이 들더군요. 만드신 앱은 앞서 만든 facebook page와 연동됩니다. 그리고 <strong>“그 facebook page의 메신저에 사용자가 입력한 메시지”</strong>를 받아오기 위한 <strong>“서버 url”</strong>(예, <a href="http://localhost:1337" target="_blank" rel="noopener">http://localhost:1337</a>) 또한 추가할 것입니다.</p>
<p>아래는 방금 만든 앱의 대시보드입니다. 이 앱은 messenger 기능을 사용할 것이므로 아래 사진에서는 “제품 추가” 하단에 있는 Messenger 부분의 “설정 버튼”을 누르십시오.</p>
<img src="/2018/04/01/node-js로-페이스북-챗봇-만들기-6/app_dashboard.PNG" title="앱 대시보드">
<p>아래와 같이 <strong>좌측에 있는 제품</strong> 이라는 부분에 Messenger와 Webhooks가 추가되었으며 Messenger 설정 화면에는 <strong>1. 토큰 생성</strong>과 <strong>2. Webhooks</strong>가 있습니다.</p>
<img src="/2018/04/01/node-js로-페이스북-챗봇-만들기-6/messenger_setting.PNG" title="메신저 관련 세팅">
<p><strong>1. 토큰 생성</strong>에서 페이지 선택을 눌러보시면 방금 만든 페이지가 나올 것입니다. 선택해 주세요. 그럼 페이지 액세스 토큰이라는 게 생성됩니다. 이 토큰은 이후 챗봇 서버가 답장할 페이지를 구별하기 위해 사용됩니다.</p>
<p>이에 대한 자세한 설명은 이후에 하겠습니다.</p>
<p><strong>2. Webhooks</strong></p>
<p>webhooks은 web과 hook의 결합 명사의 복수 형태 보입니다. hook은 말 그대로 고리 입니다. 후크 선장 손 대신 쓰는 그거요. 왜 webhook인지는 저도 모르겠습니다(이름이 그런 걸 어쩌라고). 여러분의 서버 주소를 갈고리로 걸어놓고 어떤 이벤트가 일어날 때 그 갈고리가 걸려있는 서버에도 뭔가 알림이나 정보를 보냅니다. 마치 이메일을 보낼 때 CC로 다른 사람 추가해서 보내는 거랑 비슷한 겁니다.</p>
<img src="/2018/04/01/node-js로-페이스북-챗봇-만들기-6/webhook.PNG" title="웹훅. 그거슨 난관">
<p>콜백 URL이라고 되어 있네요. 여기 당신의 서버 주소를 적어주시면 됩니다. 그런데 http가 아니라 https 서버여야 합니다. https 서버를 만드는 법은 쉽습니다. 앞서서 http 서버를 만드셨죠. require할 때 https를 require 하시고 createServer 함수를 실행하면 https 서버가 완성됩니다. 근데 거기에 더해서 도메인(naver.com, daum.net 같은 거)과 https를 위한 인증서가 필요합니다.</p>
<p>뭘까요? 사실 HTTPS 서버는 만들기 어렵습니다.. 쉽지 않아요. 그렇다고 여기서 HTTPS 서버 만들기를 할 수는 없어요. 그렇게 되면 글의 핀트가 너무도 어긋나게 됩니다. 그래서 필요한 게 앞서 다운받은 <a href="https://ngrok.com/" target="_blank" rel="noopener">ngrok</a>입니다. 얘 홈피에서 가입 하시고 다운로드 받으셔야 해요.</p>
<p>얘는 https 서버를 쉽게 생성할 수 있도록 도와줍니다. 시도해봅시다.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/" data-id="cjfj7jgy0000jscux24b499bi" class="article-share-link">공유</a>
      
        <a href="https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/#disqus_thread" class="article-comment-link">댓글</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/aws-lambda/">aws lambda</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/chatbot/">chatbot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/facebook-messenger/">facebook messenger</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node-js/">node.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/챗봇/">챗봇</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/04/03/구구구구/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">최신</strong>
      <div class="article-nav-title">
        
          구구구구
        
      </div>
    </a>
  
  
    <a href="/2018/03/31/이상한-꿈/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">이전</strong>
      <div class="article-nav-title">이상한 꿈</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">카테고리</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/chatbot/">chatbot</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/일기/">일기</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">태그</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/GS25/">GS25</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/aws-lambda/">aws lambda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/chatbot/">chatbot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/facebook-messenger/">facebook messenger</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/단지우유/">단지우유</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/비둘기/">비둘기</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/빙그레/">빙그레</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/연어장/">연어장</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/오디맛/">오디맛</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/챗봇/">챗봇</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">태그 클라우드</h3>
    <div class="widget tagcloud">
      <a href="/tags/GS25/" style="font-size: 10px;">GS25</a> <a href="/tags/aws-lambda/" style="font-size: 20px;">aws lambda</a> <a href="/tags/chatbot/" style="font-size: 20px;">chatbot</a> <a href="/tags/facebook-messenger/" style="font-size: 20px;">facebook messenger</a> <a href="/tags/node-js/" style="font-size: 20px;">node.js</a> <a href="/tags/단지우유/" style="font-size: 10px;">단지우유</a> <a href="/tags/비둘기/" style="font-size: 15px;">비둘기</a> <a href="/tags/빙그레/" style="font-size: 10px;">빙그레</a> <a href="/tags/연어장/" style="font-size: 10px;">연어장</a> <a href="/tags/오디맛/" style="font-size: 10px;">오디맛</a> <a href="/tags/챗봇/" style="font-size: 20px;">챗봇</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">아카이브</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">4월 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">3월 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">최근 포스트</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/04/03/구구구구/">구구구구</a>
          </li>
        
          <li>
            <a href="/2018/04/01/node-js로-페이스북-챗봇-만들기-6/">node.js로 페이스북 챗봇 만들기 6</a>
          </li>
        
          <li>
            <a href="/2018/03/31/이상한-꿈/">이상한 꿈</a>
          </li>
        
          <li>
            <a href="/2018/03/29/node-js로-페이스북-챗봇-만들기-5/">node.js로 페이스북 챗봇 만들기 5</a>
          </li>
        
          <li>
            <a href="/2018/03/24/node-js로-페이스북-챗봇-만들기-4/">node.js로 페이스북 챗봇 만들기 4</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 SeungHyeon Oh<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav>
    
<script>
  var disqus_shortname = 'ohseunghyeon';
  
  var disqus_url = 'https://ohseunghyeon.github.io/2018/04/01/node-js로-페이스북-챗봇-만들기-6/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>